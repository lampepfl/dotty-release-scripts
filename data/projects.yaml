scala3-example-project:
  upstream: https://github.com/scala/scala3-example-project
  test_spec:
    command: sbt run
  update_spec:
    - file: README.md
      pattern: scalaVersion\s*:=\s*"{scala3_version_pattern}"
      replacement: scalaVersion := "{release_version}"
    - file: build.sbt
      pattern: scalaVersion\s*:=\s*".*"
      replacement: scalaVersion := "{release_version}"
  commit_directly: True

scala3-cross.g8:
  upstream: https://github.com/scala/scala3-cross.g8
  test_spec:
    run_from_root: True
    command: >
      rm -rf foo ;
      sbt new file://./scala3-cross.g8 --name=foo --description=bar &&
      cd foo &&
      sbt run
  update_spec:
    - file: src/main/g8/build.sbt
      pattern: scala3Version\s*=\s*"{scala3_version_pattern}"
      replacement: scala3Version = "{release_version}"
  commit_directly: True

scala3-staging.g8:
  upstream: https://github.com/scala/scala3-staging.g8
  test_spec:
    run_from_root: True
    command: >
      rm -rf foo ;
      sbt new file://./scala3-staging.g8 --name=foo --description=bar &&
      cd foo &&
      sbt ";run; test"
  update_spec:
    - file: src/main/g8/build.sbt
      pattern: scala3Version\s*=\s*"{scala3_version_pattern}"
      replacement: scala3Version = "{release_version}"
  commit_directly: True

scala3-tasty-inspector.g8:
  upstream: https://github.com/scala/scala3-tasty-inspector.g8
  test_spec:
    run_from_root: True
    command: >
      rm -rf foo ;
      sbt new file://./scala3-tasty-inspector.g8 --name=foo --description=bar &&
      cd foo &&
      sbt ";lib/test ;inspector/run ;inspector/test"
  update_spec:
    - file: src/main/g8/build.sbt
      pattern: scala3Version\s*=\s*"{scala3_version_pattern}"
      replacement: scala3Version = "{release_version}"
    - file: src/main/g8/inspector/src/main/scala/inspector/Main.scala
      pattern: lib/target/scala-{scala3_version_pattern}
      replacement: lib/target/scala-{release_version}
    - file: src/main/g8/inspector/src/test/scala/inspector/Test.scala
      pattern: lib/target/scala-{scala3_version_pattern}
      replacement: lib/target/scala-{release_version}
  commit_directly: True

xml-interpolator:
  upstream: https://github.com/lampepfl/xml-interpolator
  staging: https://github.com/dotty-staging/xml-interpolator
  test_spec:
    command: sbt test
  update_spec:
    - file: build.sbt
      pattern: dottyVersion\s*=\s*"{scala3_version_pattern}"
      replacement: dottyVersion = "{release_version}"

scastie:
  upstream: https://github.com/scalacenter/scastie
  staging: https://github.com/dotty-staging/scastie
  test_spec:
    command: echo 'No test available for Scastie'
  update_spec:
    - file: project/SbtShared.scala
      pattern: val\s+latest3\s*=\s*"{scala3_version_pattern}"
      replacement: val latest3   = "{release_version}"
